<view class="container">
  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item">
      <picker mode="date" value="{{checkInDate}}" start="{{today}}" bindchange="onCheckInChange">
        <view class="picker-text">{{checkInDate || 'å…¥ä½æ—¥æœŸ'}}</view>
      </picker>
    </view>
    <text class="filter-separator">è‡³</text>
    <view class="filter-item">
      <picker mode="date" value="{{checkOutDate}}" start="{{minCheckOut || today}}" bindchange="onCheckOutChange">
        <view class="picker-text">{{checkOutDate || 'é€€æˆ¿æ—¥æœŸ'}}</view>
      </picker>
    </view>
    <view class="filter-item">
      <picker mode="selector" range="{{guestOptions}}" value="{{guestIndex}}" bindchange="onGuestChange">
        <view class="picker-text">{{guestOptions[guestIndex]}}äºº</view>
      </picker>
    </view>
  </view>

  <!-- åå¥½ç­›é€‰æ  -->
  <view class="preference-bar" wx:if="{{roomTypes.length > 0}}">
    <view class="preference-label">æ’åºï¼š</view>
    <picker mode="selector" range="{{sortOptions}}" value="{{sortIndex}}" bindchange="onSortChange">
      <view class="preference-item">
        <text class="preference-text">{{sortOptions[sortIndex]}}</text>
        <text class="preference-arrow">â–¼</text>
      </view>
    </picker>
  </view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æœç´¢ä¸­...</text>
  </view>
  
  <!-- æœªé€‰æ‹©æ—¥æœŸæ—¶çš„æç¤º -->
  <view class="empty-date" wx:if="{{!loading && !checkInDate && !checkOutDate}}">
    <view class="empty-date-content">
      <text class="empty-date-icon">ğŸ“…</text>
      <text class="empty-date-text">è¯·é€‰æ‹©å…¥ä½å’Œé€€æˆ¿æ—¥æœŸ</text>
      <view class="date-picker-group">
        <picker mode="date" value="{{checkInDate}}" start="{{today}}" bindchange="onCheckInChange">
          <view class="date-picker-btn">
            <text class="date-picker-label">å…¥ä½æ—¥æœŸ</text>
            <text class="date-picker-value">{{checkInDate || 'è¯·é€‰æ‹©'}}</text>
          </view>
        </picker>
        <picker mode="date" value="{{checkOutDate}}" start="{{minCheckOut || today}}" bindchange="onCheckOutChange">
          <view class="date-picker-btn">
            <text class="date-picker-label">é€€æˆ¿æ—¥æœŸ</text>
            <text class="date-picker-value">{{checkOutDate || 'è¯·é€‰æ‹©'}}</text>
          </view>
        </picker>
      </view>
    </view>
  </view>
  
  <!-- æˆ¿å‹åˆ—è¡¨ -->
  <view class="room-list" wx:if="{{!loading && roomTypes.length > 0}}">
    <view class="room-card card" wx:for="{{roomTypes}}" wx:key="id" bindtap="goDetail" data-id="{{item.id}}">
      <image class="room-image" src="{{item.images[0] || 'https://dummyimage.com/400x300/667eea/ffffff.png&text=Room'}}" mode="aspectFill" binderror="onImageError" data-index="{{index}}"></image>
      <view class="room-info">
        <view class="room-name">{{item.name}}</view>
        <view class="room-tags">
          <text class="tag">{{item.bedType}}</text>
          <text class="tag">{{item.area}}ã¡</text>
          <text class="tag">æœ€å¤š{{item.maxGuests}}äºº</text>
        </view>
        <view class="room-bottom">
          <view class="price">
            <text class="amount">Â¥{{item.basePrice}}</text>
            <text class="unit">/æ™š</text>
          </view>
          <button class="btn-book" size="mini">é¢„è®¢</button>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && isEmpty && checkInDate && checkOutDate}}">
    <text class="empty-icon">ğŸ </text>
    <text class="empty-text">æš‚æ— å¯ç”¨æˆ¿å‹</text>
    <text class="empty-tip">è¯·å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶</text>
  </view>
</view>
