<view class="container">
  <!-- 筛选栏 -->
  <view class="filter-section">
    <picker mode="selector" 
            range="{{statusOptions}}"
            value="{{statusFilterIndex}}"
            bindchange="onStatusFilterChange">
      <view class="filter-item">
        <text>{{statusFilterText}}</text>
        <text class="arrow">▼</text>
      </view>
    </picker>
    
    <picker mode="selector" 
            range="{{roomTypeOptions}}"
            value="{{roomTypeFilterIndex}}"
            bindchange="onRoomTypeFilterChange">
      <view class="filter-item">
        <text>{{roomTypeFilterText}}</text>
        <text class="arrow">▼</text>
      </view>
    </picker>
  </view>

  <!-- 房间列表 -->
  <view class="rooms-list">
    <view class="room-item card" 
          wx:for="{{rooms}}" 
          wx:key="id">
      <view class="room-header">
        <view class="room-info">
          <text class="room-number">{{item.roomNumber}}</text>
          <text class="room-type">{{item.roomType && item.roomType.name ? item.roomType.name : ''}}</text>
        </view>
        <view class="status-badge" style="background: {{item.statusColor}}15; color: {{item.statusColor}};">
          {{item.statusText}}
        </view>
      </view>

      <view class="room-details">
        <view class="detail-row">
          <text class="label">楼层：</text>
          <text class="value">{{item.floor ? item.floor : '-'}}</text>
        </view>
        <view class="detail-row">
          <text class="label">面积：</text>
          <text class="value">{{item.roomType && item.roomType.area ? item.roomType.area : '-'}}㎡</text>
        </view>
        <view class="detail-row">
          <text class="label">清洁状态：</text>
          <text class="value clean-status" style="color: {{item.cleanStatusColor}};">
            {{item.cleanStatusText}}
          </text>
        </view>
      </view>

      <!-- 操作按钮 -->
      <view class="room-actions">
        <button class="action-btn" 
                data-id="{{item.id}}"
                data-status="{{item.status}}"
                catchtap="updateRoomStatus">
          更新状态
        </button>
        <button class="action-btn secondary" 
                data-id="{{item.id}}"
                data-cleanstatus="{{item.cleanStatus}}"
                catchtap="updateCleanStatus">
          清洁状态
        </button>
      </view>
    </view>

    <view class="empty" wx:if="{{!loading && rooms.length === 0}}">
      <text>暂无房间</text>
    </view>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
</view>

