<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar" wx:if="{{!type}}">
    <input class="search-input" 
           placeholder="搜索订单号、宾客姓名" 
           value="{{keyword}}"
           bindinput="onSearchInput"
           bindconfirm="onSearch" />
    <view class="search-btn" bindtap="onSearch">搜索</view>
  </view>

  <!-- 状态筛选 -->
  <view class="filter-bar" wx:if="{{!type}}">
    <picker mode="selector" 
            range="{{statusOptions}}"
            value="{{statusFilterIndex}}"
            bindchange="onStatusChange">
      <view class="filter-item">
        <text>{{statusFilterText}}</text>
        <text class="arrow">▼</text>
      </view>
    </picker>
  </view>

  <!-- 订单列表 -->
  <view class="orders-list">
    <view class="order-item card" 
          wx:for="{{orders}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="goOrderDetail">
      <view class="order-header">
        <text class="order-no">订单号：{{item.orderNo}}</text>
        <view class="status-badge" style="background: {{item.statusColor}}15; color: {{item.statusColor}};">
          {{item.statusText}}
        </view>
      </view>
      
      <view class="order-info">
        <view class="info-row">
          <text class="label">宾客：</text>
          <text class="value">{{item.guestName}}</text>
        </view>
        <view class="info-row">
          <text class="label">电话：</text>
          <text class="value">{{item.guestPhone}}</text>
        </view>
        <view class="info-row">
          <text class="label">入住：</text>
          <text class="value">{{item.checkInDate}}</text>
        </view>
        <view class="info-row">
          <text class="label">退房：</text>
          <text class="value">{{item.checkOutDate}}</text>
        </view>
        <view class="info-row" wx:if="{{item.roomNumber}}">
          <text class="label">房间：</text>
          <text class="value">{{item.roomNumber}}</text>
        </view>
        <view class="info-row">
          <text class="label">金额：</text>
          <text class="value price">¥{{item.totalPrice}}</text>
        </view>
      </view>

      <!-- 操作按钮 -->
      <view class="order-actions">
        <button class="action-btn" 
                wx:if="{{(item.status === 'confirmed' || item.status === 'pending') && (type === 'checkin' || !type)}}"
                data-id="{{item.id}}"
                catchtap="handleCheckIn">
          办理入住
        </button>
        <button class="action-btn" 
                wx:if="{{item.status === 'checked_in' && (type === 'checkout' || !type)}}"
                data-id="{{item.id}}"
                catchtap="handleCheckOut">
          办理退房
        </button>
      </view>
    </view>

    <view class="empty" wx:if="{{!loading && orders.length === 0}}">
      <text>暂无订单</text>
    </view>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
</view>

